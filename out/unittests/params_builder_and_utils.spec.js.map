{"version":3,"sources":["../../src/unittests/params_builder_and_utils.spec.ts"],"names":["description","poptions","params","publicParamsEquals","makeTestGroup","UnitTest","ParamsTest","expectSpecEqual","act","exp","a","Array","from","expect","length","every","x","i","g","test","fn","t","hello","combine","p","q","y","filter","unless","exclude","expand","w","z","shouldThrow","undefined","_a"],"mappings":"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","sourcesContent":["export const description = `\nUnit tests for parameterization helpers.\n`;\n\nimport { poptions, params } from '../common/framework/params_builder.js';\nimport {\n  CaseParams,\n  CaseParamsIterable,\n  publicParamsEquals,\n} from '../common/framework/params_utils.js';\nimport { makeTestGroup } from '../common/framework/test_group.js';\n\nimport { UnitTest } from './unit_test.js';\n\nclass ParamsTest extends UnitTest {\n  expectSpecEqual(act: CaseParamsIterable, exp: CaseParams[]): void {\n    const a = Array.from(act);\n    this.expect(a.length === exp.length && a.every((x, i) => publicParamsEquals(x, exp[i])));\n  }\n}\n\nexport const g = makeTestGroup(ParamsTest);\n\ng.test('options').fn(t => {\n  t.expectSpecEqual(poptions('hello', [1, 2, 3]), [{ hello: 1 }, { hello: 2 }, { hello: 3 }]);\n});\n\ng.test('params').fn(t => {\n  t.expectSpecEqual(params(), [{}]);\n});\n\ng.test('combine,zeroes_and_ones').fn(t => {\n  t.expectSpecEqual(params().combine([]).combine([]), []);\n  t.expectSpecEqual(params().combine([]).combine([{}]), []);\n  t.expectSpecEqual(params().combine([{}]).combine([]), []);\n  t.expectSpecEqual(params().combine([{}]).combine([{}]), [{}]);\n});\n\ng.test('combine,mixed').fn(t => {\n  t.expectSpecEqual(\n    params()\n      .combine(poptions('x', [1, 2]))\n      .combine(poptions('y', ['a', 'b']))\n      .combine([{ p: 4 }, { q: 5 }])\n      .combine([{}]),\n    [\n      { x: 1, y: 'a', p: 4 },\n      { x: 1, y: 'a', q: 5 },\n      { x: 1, y: 'b', p: 4 },\n      { x: 1, y: 'b', q: 5 },\n      { x: 2, y: 'a', p: 4 },\n      { x: 2, y: 'a', q: 5 },\n      { x: 2, y: 'b', p: 4 },\n      { x: 2, y: 'b', q: 5 },\n    ]\n  );\n});\n\ng.test('filter').fn(t => {\n  t.expectSpecEqual(\n    params()\n      .combine([\n        { a: true, x: 1 },\n        { a: false, y: 2 },\n      ])\n      .filter(p => p.a),\n    [{ a: true, x: 1 }]\n  );\n});\n\ng.test('unless').fn(t => {\n  t.expectSpecEqual(\n    params()\n      .combine([\n        { a: true, x: 1 },\n        { a: false, y: 2 },\n      ])\n      .unless(p => p.a),\n    [{ a: false, y: 2 }]\n  );\n});\n\ng.test('exclude').fn(t => {\n  t.expectSpecEqual(\n    params()\n      .combine([\n        { a: true, x: 1 },\n        { a: false, y: 2 },\n      ])\n      .exclude([{ a: true }, { a: false, y: 2 }]),\n    [{ a: true, x: 1 }]\n  );\n});\n\ng.test('expand').fn(t => {\n  t.expectSpecEqual(\n    params()\n      .combine([\n        { a: true, x: 1 },\n        { a: false, y: 2 },\n      ])\n      .expand(function* (p) {\n        if (p.a) {\n          yield* poptions('z', [3, 4]);\n        } else {\n          yield { w: 5 };\n        }\n      }),\n    [\n      { a: true, x: 1, z: 3 },\n      { a: true, x: 1, z: 4 },\n      { a: false, y: 2, w: 5 },\n    ]\n  );\n});\n\ng.test('expand,invalid').fn(t => {\n  const p = params()\n    .combine([{ x: 1 }])\n    .expand(function* (p) {\n      yield p; // causes key 'x' to be duplicated\n    });\n  t.shouldThrow('Error', () => {\n    Array.from(p);\n  });\n});\n\ng.test('undefined').fn(t => {\n  t.expect(!publicParamsEquals({ a: undefined }, {}));\n  t.expect(!publicParamsEquals({}, { a: undefined }));\n});\n\ng.test('private').fn(t => {\n  t.expect(publicParamsEquals({ _a: 0 }, {}));\n  t.expect(publicParamsEquals({}, { _a: 0 }));\n});\n\ng.test('arrays').fn(t => {\n  t.expectSpecEqual([{ a: [1, 2] }], [{ a: [1, 2] }]);\n});\n"],"file":"params_builder_and_utils.spec.js"}