{"version":3,"sources":["../../../../src/webgpu/web-platform/reftests/gpu_ref_test.ts"],"names":["assert","runRefTest","fn","navigator","gpu","undefined","adapter","requestAdapter","device","requestDevice","queue","defaultQueue","takeScreenshotDelayed"],"mappings":";;GAAA,SAASA,MAAT,QAAuB,wCAAvB;;;;;;;AASA,OAAO,eAAeC,UAAf,CAA0BC,EAA1B,EAA+E;AACpFF,EAAAA,MAAM;AACJ,SAAOG,SAAP,KAAqB,WAArB,IAAoCA,SAAS,CAACC,GAAV,KAAkBC,SADlD;AAEJ,kCAFI,CAAN;;;AAKA,QAAMC,OAAO,GAAG,MAAMH,SAAS,CAACC,GAAV,CAAcG,cAAd,EAAtB;AACAP,EAAAA,MAAM,CAACM,OAAO,KAAK,IAAb,CAAN;AACA,QAAME,MAAM,GAAG,MAAMF,OAAO,CAACG,aAAR,EAArB;AACAT,EAAAA,MAAM,CAACQ,MAAM,KAAK,IAAZ,CAAN;AACA,QAAME,KAAK,GAAGF,MAAM,CAACG,YAArB;;AAEA,QAAMT,EAAE,CAAC,EAAEM,MAAF,EAAUE,KAAV,EAAD,CAAR;;AAEAE,EAAAA,qBAAqB,CAAC,EAAD,CAArB;AACD","sourcesContent":["import { assert } from '../../../common/framework/util/util.js';\n\ndeclare function takeScreenshotDelayed(ms: number): void;\n\ninterface GPURefTest {\n  readonly device: GPUDevice;\n  readonly queue: GPUQueue;\n}\n\nexport async function runRefTest(fn: (t: GPURefTest) => Promise<void>): Promise<void> {\n  assert(\n    typeof navigator !== 'undefined' && navigator.gpu !== undefined,\n    'No WebGPU implementation found'\n  );\n\n  const adapter = await navigator.gpu.requestAdapter();\n  assert(adapter !== null);\n  const device = await adapter.requestDevice();\n  assert(device !== null);\n  const queue = device.defaultQueue;\n\n  await fn({ device, queue });\n\n  takeScreenshotDelayed(50);\n}\n"],"file":"gpu_ref_test.js"}