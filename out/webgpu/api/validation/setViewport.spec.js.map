{"version":3,"sources":["../../../../src/webgpu/api/validation/setViewport.spec.ts"],"names":["description","makeTestGroup","ValidationTest","TEXTURE_WIDTH","TEXTURE_HEIGHT","F","beginRenderPass","commandEncoder","attachmentTexture","device","createTexture","format","size","width","height","depth","usage","GPUTextureUsage","OUTPUT_ATTACHMENT","colorAttachments","attachment","createView","loadValue","r","g","b","a","test","params","x","y","minDepth","maxDepth","_success","fn","t","createCommandEncoder","renderPass","setViewport","endPass","expectValidationError","finish"],"mappings":"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","sourcesContent":["export const description = `\nsetViewport validation tests.\n`;\n\nimport { makeTestGroup } from '../../../common/framework/test_group.js';\n\nimport { ValidationTest } from './validation_test.js';\n\nconst TEXTURE_WIDTH: number = 16;\nconst TEXTURE_HEIGHT: number = 16;\n\n// TODO: Move this fixture class to a common file.\nclass F extends ValidationTest {\n  beginRenderPass(commandEncoder: GPUCommandEncoder): GPURenderPassEncoder {\n    const attachmentTexture = this.device.createTexture({\n      format: 'rgba8unorm',\n      size: { width: TEXTURE_WIDTH, height: TEXTURE_HEIGHT, depth: 1 },\n      usage: GPUTextureUsage.OUTPUT_ATTACHMENT,\n    });\n\n    return commandEncoder.beginRenderPass({\n      colorAttachments: [\n        {\n          attachment: attachmentTexture.createView(),\n          loadValue: { r: 1.0, g: 0.0, b: 0.0, a: 1.0 },\n        },\n      ],\n    });\n  }\n}\n\nexport const g = makeTestGroup(F);\n\ng.test('use_of_setViewport')\n  .params([\n    { x: 0, y: 0, width: 1, height: 1, minDepth: 0, maxDepth: 1, _success: true }, // Basic use\n    { x: 0, y: 0, width: 0, height: 1, minDepth: 0, maxDepth: 1, _success: false }, // Width of zero is not allowed\n    { x: 0, y: 0, width: 1, height: 0, minDepth: 0, maxDepth: 1, _success: false }, // Height of zero is not allowed\n    { x: 0, y: 0, width: 0, height: 0, minDepth: 0, maxDepth: 1, _success: false }, // Both width and height of zero are not allowed\n    { x: -1, y: 0, width: 1, height: 1, minDepth: 0, maxDepth: 1, _success: true }, // Negative x is allowed\n    { x: 0, y: -1, width: 1, height: 1, minDepth: 0, maxDepth: 1, _success: true }, // Negative y is allowed\n    { x: 0, y: 0, width: -1, height: 1, minDepth: 0, maxDepth: 1, _success: false }, // Negative width is not allowed\n    { x: 0, y: 0, width: 1, height: -1, minDepth: 0, maxDepth: 1, _success: false }, // Negative height is not allowed\n    { x: 0, y: 0, width: 1, height: 1, minDepth: -1, maxDepth: 1, _success: false }, // Negative minDepth is not allowed\n    { x: 0, y: 0, width: 1, height: 1, minDepth: 0, maxDepth: -1, _success: false }, // Negative maxDepth is not allowed\n    { x: 0, y: 0, width: 1, height: 1, minDepth: 10, maxDepth: 1, _success: false }, // minDepth greater than 1 is not allowed\n    { x: 0, y: 0, width: 1, height: 1, minDepth: 0, maxDepth: 10, _success: false }, // maxDepth greater than 1 is not allowed\n    { x: 0, y: 0, width: 1, height: 1, minDepth: 0.5, maxDepth: 0.5, _success: true }, // minDepth equal to maxDepth is allowed\n    { x: 0, y: 0, width: 1, height: 1, minDepth: 0.8, maxDepth: 0.5, _success: true }, // minDepth greater than maxDepth is allowed\n    {\n      x: 0,\n      y: 0,\n      width: TEXTURE_WIDTH + 1,\n      height: TEXTURE_HEIGHT + 1,\n      minDepth: 0,\n      maxDepth: 1,\n      _success: true,\n    }, // Viewport larger than the framebuffer is allowed\n  ])\n  .fn(async t => {\n    const { x, y, width, height, minDepth, maxDepth, _success } = t.params;\n\n    const commandEncoder = t.device.createCommandEncoder();\n    const renderPass = t.beginRenderPass(commandEncoder);\n    renderPass.setViewport(x, y, width, height, minDepth, maxDepth);\n    renderPass.endPass();\n\n    t.expectValidationError(() => {\n      commandEncoder.finish();\n    }, !_success);\n  });\n"],"file":"setViewport.spec.js"}